<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PantryManager - Wireframe</title>
    <meta
      name="description"
      content="Wireframe layout for PantryManager, a kitchen inventory and meal planning web app."
    />
    <link rel="stylesheet" href="assets/css/styles.css" />
  </head>
  <body>
    <!--
      Top-level app container.
      This wireframe intentionally keeps semantic landmarks clear to support
      incremental conversion into production-grade components.
    -->
    <div class="app-shell">
      <header class="app-header">
        <h1>PantryManager</h1>
        <p class="tagline">Kitchen inventory, recipes, meal plans, and smart shopping support.</p>
      </header>

      <nav class="app-nav" aria-label="Primary">
        <button type="button" data-target="inventory">Inventory</button>
        <button type="button" data-target="recipes">Recipes</button>
        <button type="button" data-target="recommendations">Recommendations</button>
        <button type="button" data-target="meal-plan">Meal Plan</button>
        <button type="button" data-target="shopping-list">Shopping List</button>
        <button type="button" data-target="barcode">Barcode</button>
        <button type="button" data-target="sync">Sync</button>
      </nav>

      <main class="app-main">
        <section id="inventory" class="panel is-active" aria-labelledby="inventory-heading">
          <h2 id="inventory-heading">Inventory</h2>
          <p>Track quantities, prices, expiry dates, and nutritional details.</p>

          <div class="card inventory-toolbar">
            <h3>Search & Filters</h3>
            <div class="filter-grid">
              <label>
                Product name
                <input id="inventory-search-name" type="search" placeholder="Search by name" />
              </label>
              <label>
                Expiry date on or before
                <input id="inventory-filter-expiry" type="date" />
              </label>
              <label>
                Category
                <input id="inventory-filter-category" type="text" placeholder="e.g. dairy" />
              </label>
            </div>
          </div>

          <div class="card-grid inventory-grid">
            <article class="card">
              <h3>Product List</h3>
              <p id="inventory-results-summary" class="helper-text" aria-live="polite"></p>
              <div class="table-wrap">
                <table class="inventory-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Quantity</th>
                      <th>Unit</th>
                      <th>Price</th>
                      <th>Category</th>
                      <th>Expiry</th>
                      <th>Barcode</th>
                      <th>Nutrition (per 100)</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="inventory-table-body"></tbody>
                </table>
              </div>
            </article>

            <article class="card">
              <h3 id="inventory-form-heading">Add Product</h3>
              <p class="helper-text">Fields marked * are required by the MVP data model.</p>
              <div id="inventory-form-feedback" class="form-feedback" role="alert" aria-live="assertive"></div>
              <form id="inventory-form" novalidate>
                <input type="hidden" id="inventory-item-id" />
                <div class="form-grid">
                  <label>
                    Name *
                    <input id="item-name" name="name" type="text" maxlength="120" required />
                  </label>
                  <label>
                    Quantity *
                    <input id="item-quantity" name="quantity" type="number" min="0.01" step="0.01" required />
                  </label>
                  <label>
                    Unit *
                    <select id="item-unit" name="unit" required>
                      <option value="">Select a unit</option>
                      <option value="g">g</option>
                      <option value="kg">kg</option>
                      <option value="ml">ml</option>
                      <option value="l">l</option>
                      <option value="count">count</option>
                    </select>
                  </label>
                  <label>
                    Price *
                    <input id="item-price" name="price" type="number" min="0" step="0.01" required />
                  </label>
                  <label>
                    Expiry date
                    <input id="item-expiry" name="expiryDate" type="date" />
                  </label>
                  <label>
                    Barcode
                    <input id="item-barcode" name="barcode" type="text" />
                  </label>
                  <label>
                    Category
                    <input id="item-category" name="category" type="text" />
                  </label>
                </div>

                <fieldset class="nutrition-fieldset">
                  <legend>Nutrition per 100 * (all required)</legend>
                  <div class="form-grid nutrition-grid">
                    <label>
                      Calories *
                      <input id="nutrition-calories" name="caloriesPer100" type="number" min="0" step="0.01" required />
                    </label>
                    <label>
                      Protein *
                      <input id="nutrition-protein" name="proteinPer100" type="number" min="0" step="0.01" required />
                    </label>
                    <label>
                      Carbs *
                      <input id="nutrition-carbs" name="carbsPer100" type="number" min="0" step="0.01" required />
                    </label>
                    <label>
                      Sugars *
                      <input id="nutrition-sugars" name="sugarsPer100" type="number" min="0" step="0.01" required />
                    </label>
                    <label>
                      Fats *
                      <input id="nutrition-fats" name="fatsPer100" type="number" min="0" step="0.01" required />
                    </label>
                  </div>
                </fieldset>

                <div class="form-actions">
                  <button type="submit" id="inventory-submit">Add Item</button>
                  <button type="button" id="inventory-cancel-edit" class="button-muted">Cancel Edit</button>
                </div>
              </form>
            </article>
          </div>
        </section>

        <section id="recipes" class="panel" aria-labelledby="recipes-heading">
          <h2 id="recipes-heading">Recipes</h2>
          <p>Store recipes and map ingredient requirements per serving.</p>

          <div class="card-grid inventory-grid">
            <article class="card">
              <h3>Recipe Library</h3>
              <p id="recipe-results-summary" class="helper-text" aria-live="polite"></p>
              <div class="table-wrap">
                <table class="inventory-table">
                  <thead>
                    <tr>
                      <th>Name</th>
                      <th>Servings</th>
                      <th>Ingredients (with normalization)</th>
                      <th>Preparation Notes</th>
                      <th>Recipe ID</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody id="recipe-table-body"></tbody>
                </table>
              </div>
            </article>

            <article class="card">
              <h3 id="recipe-form-heading">Add Recipe</h3>
              <p class="helper-text">Ingredient rows must reference inventory items (MVP rule). Servings must be at least 1.</p>
              <div id="recipe-form-feedback" class="form-feedback" role="alert" aria-live="assertive"></div>
              <form id="recipe-form" novalidate>
                <input type="hidden" id="recipe-id" />
                <div class="form-grid">
                  <label>
                    Recipe name *
                    <input id="recipe-name" type="text" maxlength="120" required />
                  </label>
                  <label>
                    Servings *
                    <input id="recipe-servings" type="number" min="1" step="1" required />
                  </label>
                </div>

                <fieldset class="nutrition-fieldset">
                  <legend>Ingredients * (inventory-linked only)</legend>
                  <div id="ingredient-rows" class="ingredient-rows"></div>
                  <button type="button" id="recipe-add-ingredient" class="button-muted">Add Ingredient Row</button>
                </fieldset>

                <label>
                  Preparation notes (optional)
                  <textarea id="recipe-preparation-notes" rows="4" placeholder="Optional preparation notes for this recipe."></textarea>
                </label>

                <div class="form-actions">
                  <button type="submit" id="recipe-submit">Add Recipe</button>
                  <button type="button" id="recipe-cancel-edit" class="button-muted">Cancel Edit</button>
                </div>
              </form>
            </article>
          </div>
        </section>

        <section id="recommendations" class="panel" aria-labelledby="recommendations-heading">
          <h2 id="recommendations-heading">Recommendations</h2>
          <p>Suggest recipes based on current pantry availability and configured priorities.</p>
          <div class="card-grid">
            <article class="card" id="recommendations-controls-panel" data-testid="recommendations-controls-panel">
              <h3>Recommendation Controls</h3>
              <p class="helper-text">Run ranking against current recipe and inventory state.</p>
              <div class="form-actions">
                <button type="button" id="recommendations-run-button" data-testid="recommendations-run-button">Generate Recommendations</button>
              </div>
              <p id="recommendations-status" class="helper-text" aria-live="polite" data-testid="recommendations-status"></p>
            </article>

            <article class="card" id="recommendations-output-panel" data-testid="recommendations-output-panel">
              <h3>Recommendation Ranking</h3>
              <div id="recommendations-output" data-testid="recommendations-output"></div>
            </article>
          </div>
        </section>

        <section id="meal-plan" class="panel" aria-labelledby="meal-plan-heading">
          <h2 id="meal-plan-heading">Weekly Meal Plan</h2>
          <p>Organize meals by day and time to plan inventory usage.</p>
          <div class="card-grid">
            <article class="card" id="meal-plan-controls-panel" data-testid="meal-plan-controls-panel">
              <h3>Plan Controls</h3>
              <p class="helper-text">Assign the top recommended recipes into a deterministic weekly rotation.</p>
              <div class="form-grid">
                <label>
                  Week start date
                  <input type="date" id="meal-plan-week-start" data-testid="meal-plan-week-start" />
                </label>
              </div>
              <div class="form-actions">
                <button type="button" id="meal-plan-generate-button" data-testid="meal-plan-generate-button">Generate Weekly Plan</button>
              </div>
              <p id="meal-plan-status" class="helper-text" aria-live="polite" data-testid="meal-plan-status"></p>
            </article>

            <article class="card" id="meal-plan-output-panel" data-testid="meal-plan-output-panel">
              <h3>Weekly Slot Assignments</h3>
              <div id="meal-plan-output" data-testid="meal-plan-output"></div>
            </article>
          </div>
        </section>

        <section id="shopping-list" class="panel" aria-labelledby="shopping-list-heading">
          <h2 id="shopping-list-heading">Shopping List</h2>
          <p>Generate ingredient gaps for the selected weekly plan.</p>
          <div class="card-grid">
            <article class="card" id="shopping-list-controls-panel" data-testid="shopping-list-controls-panel">
              <h3>Shopping Controls</h3>
              <p class="helper-text">Build grouped shopping output from the active weekly plan.</p>
              <div class="form-actions">
                <button type="button" id="shopping-list-generate-button" data-testid="shopping-list-generate-button">Generate Shopping List</button>
              </div>
              <p id="shopping-list-status" class="helper-text" aria-live="polite" data-testid="shopping-list-status"></p>
            </article>

            <article class="card" id="shopping-list-output-panel" data-testid="shopping-list-output-panel">
              <h3>Grouped Shopping Output</h3>
              <div id="shopping-list-output" data-testid="shopping-list-output"></div>
            </article>
          </div>
        </section>

        <section id="barcode" class="panel" aria-labelledby="barcode-heading">
          <h2 id="barcode-heading">Barcode Tools</h2>
          <p>Local-first barcode lookup with provider fallback and explicit import confirmation.</p>
          <div class="card-grid">
            <article class="card">
              <h3>Lookup</h3>
              <p class="helper-text">Hardware handles scanning; enter/paste a barcode to run the MVP workflow.</p>
              <label>
                Barcode value
                <input id="barcode-input" type="text" placeholder="Scan or type barcode" />
              </label>
              <div class="form-actions barcode-actions">
                <button type="button" id="barcode-lookup-button">Lookup Barcode</button>
              </div>
              <div id="barcode-lookup-feedback" class="form-feedback" role="alert" aria-live="assertive"></div>
            </article>
            <article class="card" id="barcode-draft-container" hidden>
              <h3>Canonical Draft Preview</h3>
              <p class="helper-text">Review mapped fields before import. Save in inventory remains manual and explicit.</p>
              <div id="barcode-draft-summary" class="barcode-draft-summary"></div>
              <label class="checkbox-row">
                <input id="barcode-confirm-import" type="checkbox" />
                I confirm this draft should prefill the inventory form.
              </label>
              <button type="button" id="barcode-apply-draft-button" disabled>Apply Confirmed Draft</button>
            </article>
          </div>
        </section>

        <section id="sync" class="panel" aria-labelledby="sync-heading">
          <h2 id="sync-heading">Sync & Backup</h2>
          <p>Explicit controls for local save, cloud sync/export, and import recovery.</p>
          <div class="card-grid">
            <article class="card">
              <h3>Actions</h3>
              <p class="helper-text">Use local save for quick persistence. Add a Google access token to sync with Drive.</p>
              <div class="form-grid">
                <label>
                  Google access token (optional for cloud sync)
                  <input id="sync-google-access-token" type="password" autocomplete="off" placeholder="Paste OAuth access token" />
                </label>
              </div>
              <div class="form-actions">
                <button type="button" id="sync-save-local-button">Save Locally</button>
                <button type="button" id="sync-export-button">Export / Sync</button>
              </div>
            </article>

            <article class="card">
              <h3>Import</h3>
              <p class="helper-text">Paste a previously exported envelope or raw app state JSON to import.</p>
              <label>
                Import payload
                <textarea id="sync-import-input" rows="10" placeholder='{"schemaVersion":1,"state":{...}}'></textarea>
              </label>
              <div class="form-actions">
                <button type="button" id="sync-import-button">Import</button>
              </div>
            </article>
          </div>
          <p id="sync-status" class="helper-text sync-status" aria-live="polite">Sync is optional; the app continues in local-only mode when cloud sync is unavailable.</p>
        </section>

      </main>

      <footer class="app-footer">
        <small>
          Wireframe build. See docs for open ambiguities and architecture decisions.
        </small>
      </footer>
    </div>

    <script type="module" src="assets/js/app.js"></script>
  </body>
</html>
